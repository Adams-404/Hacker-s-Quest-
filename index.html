<!DOCTYPE html>
<html lang="en">
<head>
    
<script src="https://unpkg.com/react@17/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker's Quest</title>
    <style>
        :root {
            --bg-color: #000000;
            --text-color: #00ff00;
            --input-bg: #0a0a0a;
            --border-color: #00ff00;
            --nav-bg: #0a0a0a;
        }

        .light-mode {
            --bg-color: #f0f0f0;
            --text-color: #0a0a0a;
            --input-bg: #ffffff;
            --border-color: #1a1a1a;
            --nav-bg: #ffffff;
        }

        body {
            font-family: 'Courier New', monospace;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        #game-text {
            height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--input-bg);

            
            scrollbar-width: thin; /* For Firefox */
            scrollbar-color: var(--text-color) var(--input-bg); /* For Firefox */
        }

        #game-text::-webkit-scrollbar {
            width: 8px;
        }

        #game-text::-webkit-scrollbar-thumb {
            background-color: var(--text-color);
            border-radius: 4px; 
        }

        #game-text::-webkit-scrollbar-track {
            background-color: var(--input-bg);
        }


        nav {
            background-color: var(--nav-bg);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: flex;
        }

        nav ul li {
            margin-right: 20px;
        }

        nav ul li a {
            color: var(--text-color);
            text-decoration: none;
        }

        .burger {
            display: none;
            cursor: pointer;
        }

        .burger div {
            width: 25px;
            height: 2px;
            background-color: var(--text-color);
            margin: 5px 0;
        }

        h1 {
            text-align: center;
        }

        #game-text {
            height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--input-bg);
        }

        #game-text p {
            margin: 0;
            padding: 0;
            line-height: 1.5;
        }
        

        #user-input {
            width: 97%;
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--input-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        #submit-btn {
            width: 100%;
            padding: 10px;
            background-color: var(--text-color);
            color: var(--bg-color);
            border: none;
            cursor: pointer;
        }
        
        #clear-progress-btn {
            color: var(--text-color);
            cursor: pointer; 
        }

        #clear-progress-btn:hover {
            color: var(--border-color); 
            cursor: pointer; 
        }


        .command-boxes {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .command-box {
            flex: 1;
            margin: 0 5px;
            padding: 10px;
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            text-align: center;
            cursor: pointer;
        }
        

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #00ff00;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--text-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: var(--bg-color);
            margin: 15% auto;
            padding: 20px;
            border: 1px solid var(--border-color);
            width: 80%;
            max-width: 600px;
        }

        .close {
            color: var(--text-color);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        @media screen and (max-width: 600px) {
            .burger {
                display: block;
            }
            
            #user-input {
                width: 95%;
            }

            nav ul {
                display: none;
                flex-direction: column;
                width: 100%;
                text-align: center;
                position: absolute;
                top: 50px;
                left: 0;
                background-color: var(--nav-bg);
            }

            nav ul.show {
                display: flex;
            }

            nav ul li {
                margin: 10px 0;
            }
        }
        
        #like-button-container {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            text-align: center;
          }

          @media screen and (min-width: 768px) {
            #like-button-container {
              bottom: auto;
              top: 50%;
              padding: 20px;
              transform: translateY(-50%);
            }
          }

          .like-button {
            display: flex;
            align-items: center;
            color: var(--text-color);
            background-color: transparent;
          }

        .like-button button {
          background-color: transparent;
          border: none;       
          outline: none;
          box-shadow: none;
        }
        
        .like-button button {
            position: relative;
        }
        
           
        #like-button-container {
            position: fixed;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            padding: 10px;
            z-index: 1000;
        }

         /* Mobile view adjustments for responsive */
         @media screen and (max-width: 767px) {
        #like-button-container {
            position: relative; 
            margin-top: 5px;
            display: block;
            text-align: center;
            justify-content: center;
            padding: 8px;
        }

        .like-button button {
            width: 40px;
            height: 40px;
            cursor: pointer;
        }

        .like-button svg {
            width: 20px;
            height: 20px;
        }
    }


        .like-button button::after {
            content: attr(aria-label);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #000;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .like-button button:hover::after {
            opacity: 1;
        }

          @media screen and (max-width: 767px) {
            #like-button-container {
              left: 50%;
              display: block;
              margin-bottom: -5%;
              padding: 10px;
              transform: translateX(-50%);
            }
          }

    </style>
</head>
<body>
    <nav>
        <div class="burger" aria-label="Toggle menu">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <ul>
            <li><a href="#" id="about-link">About</a></li>
            <li><a href="#" id="help-link">Help</a></li>
            <li id="clear-progress-btn" aria-label="Clear game progress">Clear Progress</li>

        </ul>
        <label class="switch">
            <input type="checkbox" id="mode-toggle" aria-label="Toggle light/dark mode">
            <span class="slider"></span>
        </label>
    </nav>

    <main class="container">
        <h1>Hacker's Quest</h1>
        <div class="command-boxes">
            <div class="command-box" id="command1" role="button" tabindex="0"></div>
            <div class="command-box" id="command2" role="button" tabindex="0"></div>
            <div class="command-box" id="command3" role="button" tabindex="0"></div>
            <div class="command-box" id="command4" role="button" tabindex="0"></div>
        </div>
        <div id="game-text" aria-live="polite"></div>
        <input type="text" id="user-input" placeholder="Enter your command..." aria-label="Enter your command">
        <button id="submit-btn">Execute</button>
    </main>
    
    <div id="like-button-container"></div>
    <div id="timer-container" style="display: none;">Time left: <span id="timer">60</span>s</div>

    <div id="about-modal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-labelledby="about-title">
            <span class="close" aria-label="Close">&times;</span>
            <h2 id="about-title">About Hacker's Quest</h2>
            <p>Hacker's Quest is a text-based adventure game where you play as a skilled hacker infiltrating a mysterious facility. Your mission is to uncover the secrets of Project Omega and decide the fate of digital security. Use your wit and hacking skills to navigate through various challenges and make crucial decisions that will shape the outcome of your quest.</p>
        </div>
    </div>

    <div id="help-modal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-labelledby="help-title">
            <span class="close" aria-label="Close">&times;</span>
            <h2 id="help-title">Help</h2>
            <p>To play Hacker's Quest:</p>
            <ol>
                <li>Read the description of your current situation in the game text area.</li>
                <li>Choose a command from the options displayed in the command boxes, or type your own command.</li>
                <li>Enter your chosen command in the input field and click "Execute" or press Enter.</li>
                <li>Read the outcome of your action and continue making choices to progress through the game.</li>
            </ol>
            <p>Pay attention to details and hints throughout the game. They may be crucial for solving puzzles and progressing in your mission. Your choices matter and will influence the story's outcome. Good luck, hacker!</p>
        </div>
    </div>
    

    
   



    <script>
        const levels = {
    1: {
        description: "You find yourself in a dimly lit room. A flickering screen casts eerie shadows.",
        commands: ['examine room', 'boot system', 'check pockets', 'next level'],
        outcomes: {
            'examine room': "You notice a faint etching on the wall: 'The key lies in the shadows of 1366'",
            'boot system': 2,
            'check pockets': "You find a crumpled note with 'BGG' scrawled on it.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    2: {
        description: "The system whirs to life. A command prompt blinks, waiting for input.",
        commands: ['run diagnostics', 'check network', 'decode BGG', 'next level'],
        outcomes: {
            'run diagnostics': "Diagnostic complete. System whispers: 'Seek the inverse of the shadow'",
            'check network': 3,
            'decode BGG': "Error: Decoding requires advanced cryptographic knowledge.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    3: {
        description: "You're connected to a vast network. Multiple nodes are visible, each requiring a specific access code.",
        commands: ['scan nodes', 'trace route', 'input access code', 'next level'],
        outcomes: {
            'scan nodes': "Three nodes detected: Alpha, Beta, Gamma. Each requires a 4-digit code.",
            'trace route': "Route trace reveals a hidden message: 'The key is not what it seems'",
            'input access code': 'codeInput',
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    4: {
        description: "Access granted to Node Alpha. A series of encrypted files are visible.",
        commands: ['decrypt files', 'search for clues', 'access Node Beta', 'next level'],
        outcomes: {
            'decrypt files': "Decryption failed. A riddle appears: 'I am not alive, but I grow; I don't have lungs, but I need air; I don't have a mouth, but water kills me. What am I?'",
            'search for clues': "You find a scrap of paper with 'DCBA' written on it.",
            'access Node Beta': 5,
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    5: {
        description: "Node Beta contains a complex firewall. A cryptic message flashes on the screen.",
        commands: ['analyze firewall', 'input password', 'return to Node Alpha', 'next level'],
        outcomes: {
            'analyze firewall': "Analysis reveals a hint: 'The key is hidden in plain sight, where light and shadow meet'",
            'input password': 'passwordInput',
            'return to Node Alpha': 4,
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    6: {
        description: "You've breached Node Beta. A maze of data streams surrounds you.",
        commands: ['follow red stream', 'follow blue stream', 'analyze data patterns', 'next level'],
        outcomes: {
            'follow red stream': "The stream leads to a dead end. A message appears: 'Sometimes, the path less traveled is the right one.'",
            'follow blue stream': 7,
            'analyze data patterns': "You notice a recurring sequence: 13-21-34-55. It seems significant.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    7: {
        description: "The blue stream leads to a virtual room. Holographic symbols float in the air.",
        commands: ['touch symbols', 'read symbols', 'ignore symbols', 'next level'],
        outcomes: {
            'touch symbols': "As you touch a symbol, it shatters. The others rearrange to form: 'FIBONACCI'",
            'read symbols': "The symbols spell out a message: 'The sequence holds the key to the next level'",
            'ignore symbols': "As you turn away, you hear a whisper: 'Ignorance is the enemy of progress'",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    8: {
        description: "You find yourself facing a locked door. A keypad awaits input.",
        commands: ['enter sequence', 'analyze keypad', 'look for clues', 'next level'],
        outcomes: {
            'enter sequence': 'sequenceInput',
            'analyze keypad': "The keypad has an unusual layout. The Fibonacci sequence comes to mind.",
            'look for clues': "You notice scratch marks near the keypad. They resemble the number 89.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    9: {
        description: "The door opens to reveal a vast library of digital information.",
        commands: ['search for Project Omega', 'access library index', 'examine nearby terminal', 'next level'],
        outcomes: {
            'search for Project Omega': "Your search is blocked. A message appears: 'Knowledge is power, but some secrets are best left uncovered.'",
            'access library index': "The index is encrypted. It requires a key phrase.",
            'examine nearby terminal': 10,
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    10: {
        description: "The terminal displays a chess board with pieces in an unusual position.",
        commands: ['analyze board', 'move white knight', 'move black pawn', 'next level'],
        outcomes: {
            'analyze board': "You realize it's not just a chess game, but a code. The positions represent something.",
            'move white knight': "As you move the knight, the board shifts. A message appears: 'The knight's tour begins'",
            'move black pawn': "Nothing happens. Perhaps this isn't about playing chess.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    11: {
        description: "The chess board transforms into a map of interconnected nodes.",
        commands: ["follow knight's path", 'count nodes', 'reset board', 'next level'],
        outcomes: {
            "follow knight's path": 12,
            'count nodes': "You count 64 nodes, arranged in an 8x8 grid. This seems familiar.",
            'reset board': "The board refuses to reset. A message flashes: 'Progress is irreversible'",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    12: {
        description: "The knight's path leads to a hidden chamber. Ancient and modern tech blend seamlessly here.",
        commands: ['activate ancient device', 'examine modern console', 'search for hidden passages', 'next level'],
        outcomes: {
            'activate ancient device': "The device hums to life. Symbols matching those from the virtual room appear.",
            'examine modern console': "The console displays a prompt: 'Enter the sum of wisdom'",
            'search for hidden passages': "You find nothing, but feel that the answer lies in plain sight.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    13: {
        description: "Symbols from the ancient device swirl and combine with the modern console's display.",
        commands: ['input sum', 'decode symbols', 'combine ancient and modern', 'next level'],
        outcomes: {
            'input sum': 'sumInput',
            'decode symbols': "The symbols seem to represent the Fibonacci sequence. But what's the sum?",
            'combine ancient and modern': "As you attempt to interface the ancient device with the modern console, you notice they fit perfectly together.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    14: {
        description: "A new path opens, leading deeper into the system. You sense you're getting closer to Project Omega.",
        commands: ['proceed cautiously', 'run system scan', 'leave breadcrumb trail', 'next level'],
        outcomes: {
            'proceed cautiously': 15,
            'run system scan': "Scan complete. You detect a powerful AI guardian ahead.",
            'leave breadcrumb trail': "You implement a subtle trace program. It might help if you need to backtrack.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    15: {
        description: "You encounter the AI guardian. It speaks: 'To pass, you must prove your worth. Answer my riddles three.'",
        commands: ['accept challenge', 'attempt to bypass', 'analyze AI', 'next level'],
        outcomes: {
            'accept challenge': 16,
            'attempt to bypass': "The AI anticipates your move. 'There is no bypassing wisdom,' it says.",
            'analyze AI': "Your analysis reveals that the AI is bound by its own rules. It cannot lie, but it can mislead.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    16: {
        description: "First riddle: 'I have cities, but no houses. I have mountains, but no trees. I have water, but no fish. What am I?'",
        commands: ['A map', 'A globe', 'A painting', 'next level'],
        outcomes: {
            'A map': 17,
            'A globe': "Incorrect. The AI seems disappointed.",
            'A painting': "Incorrect. The AI's eyes glow ominously.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    17: {
        description: "'Correct,' the AI nods. 'Second riddle: What comes once in a minute, twice in a moment, but never in a thousand years?'",
        commands: ['The letter M', 'Time', 'Chance', 'next level'],
        outcomes: {
            'The letter M': 18,
            'Time': "Wrong. The AI's form flickers menacingly.",
            'Chance': "Incorrect. You feel the system's defenses activating.",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    18: {
        description: "'Impressive,' the AI commends. 'Final riddle: I am not alive, but I grow; I don't have lungs, but I need air; I don't have a mouth, but water kills me. What am I?'",
        commands: ['Fire', 'Plant', 'Rust', 'next level'],
        outcomes: {
            'Fire': 19,
            'Plant': "Incorrect. The AI's disappointment is palpable.",
            'Rust': "Wrong. The AI sighs, 'So close, yet so far.'",
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    19: {
        description: "The AI guardian dissolves, revealing the core of Project Omega. 'You have proven yourself worthy,' echoes its final words.",
        commands: ['access Project Omega', 'destroy the system', 'implement backdoor', 'next level'],
        outcomes: {
            'access Project Omega': "You gain access to humanity's most advanced AI system. The power to reshape the digital world is at your fingertips.",
            'destroy the system': "With Project Omega destroyed, the digital world is safe from its potential threat, but its benefits are lost forever.",
            'implement backdoor': 20,
            'next level': "To proceed, enter your current level number in the command box below."
        }
    },
    20: {
        description: "You've successfully implemented a backdoor into Project Omega. The future of the digital world now rests in your hands.",
        commands: ['use for good', 'exploit for personal gain', 'share with the world', 'next level'],
        outcomes: {
            'use for good': "You dedicate Project Omega to solving humanity's greatest challenges. The world will never be the same.",
            'exploit for personal gain': "With Project Omega's power, you become the unseen ruler of the digital realm. But at what cost?",
            'share with the world': "You release Project Omega to the public. The consequences of this decision will echo through history.",
            'next level': "Congratulations! You have completed Hacker's Quest. There are no more levels."
        }
    }
};

let currentLevel = 1;
let lastSavedLevel = 1;
let maxUnlockedLevel = 1;
const correctCode = "1366";
const correctPassword = "fire";
const correctSequence = "89";
const correctSum = "231"; // Sum of first 13 Fibonacci numbers

const gameText = document.getElementById('game-text');
const userInput = document.getElementById('user-input');
const submitBtn = document.getElementById('submit-btn');
const modeToggle = document.getElementById('mode-toggle');
const commandBoxes = [
    document.getElementById('command1'),
    document.getElementById('command2'),
    document.getElementById('command3'),
    document.getElementById('command4')
   
];
const burger = document.querySelector('.burger');
const nav = document.querySelector('nav ul');
const aboutLink = document.getElementById('about-link');
const helpLink = document.getElementById('help-link');
const aboutModal = document.getElementById('about-modal');
const helpModal = document.getElementById('help-modal');
const closeBtns = document.getElementsByClassName('close');

function updateCommandBoxes() {
    const commands = levels[currentLevel].commands;
    commandBoxes.forEach((box, index) => {
        // If the command is "next level" and if the current level is not dead end...
        if (commands[index] === 'next level' && ![7, 10, 12].includes(currentLevel)) {
            box.style.display = 'none'; 
        } else {
            box.style.display = ''; 
            box.textContent = commands[index] || '';
            box.setAttribute('aria-label', `Command option: ${commands[index] || 'Not available'}`);
        }
    });
}


function appendToGameText(text, isUserInput = false) {
    const newParagraph = document.createElement('p');
    gameText.appendChild(newParagraph);
    if (isUserInput) {
        newParagraph.textContent = `> ${text}`;
    } else {
        typeWriter(newParagraph, text, 0);
    }
    gameText.scrollTop = gameText.scrollHeight;
}

function typeWriter(element, text, index) {
    if (index < text.length) {
        element.textContent += text.charAt(index);
        setTimeout(() => typeWriter(element, text, index + 1), 25);
    }
}

function handleCommand(command) {
    appendToGameText(command, true);
    
    // Check if the command is "show current level"
    if (command === 'show current level') {
        appendToGameText(`You are currently at level ${currentLevel}.`);
        return; 
    }

    if (command.startsWith('goto level ')) {
        const targetLevel = parseInt(command.split(' ')[2]);
        if (isNaN(targetLevel) || targetLevel < 1 || targetLevel > maxUnlockedLevel) {
            appendToGameText("Invalid level or level not unlocked yet.");
        } else {
            currentLevel = targetLevel;
            appendToGameText(`Navigating to level ${targetLevel}...`);
            appendToGameText(levels[currentLevel].description);
        }
        updateCommandBoxes();
        return;
    }

    const outcome = levels[currentLevel].outcomes[command];
    if (outcome === 'codeInput') {
        promptForCode();
    } else if (outcome === 'passwordInput') {
        promptForPassword();
    } else if (outcome === 'sequenceInput') {
        promptForSequence();
    } else if (outcome === 'sumInput') {
        promptForSum();
    } else if (typeof outcome === 'number') {
        currentLevel = outcome;
        maxUnlockedLevel = Math.max(maxUnlockedLevel, currentLevel);
        appendToGameText(levels[currentLevel].description);
    } else if (command === currentLevel.toString()) {
        currentLevel++;
        maxUnlockedLevel = Math.max(maxUnlockedLevel, currentLevel);
        appendToGameText(`Advancing to level ${currentLevel}...`);
        appendToGameText(levels[currentLevel].description);
    } else if (outcome) {
        appendToGameText(outcome);
    } else {
        appendToGameText("Invalid command. The system doesn't recognize this input.");
    }

    updateCommandBoxes();
    
    if (currentLevel % 5 === 0 && currentLevel !== lastSavedLevel) {
        saveProgress();
        lastSavedLevel = currentLevel;
        appendToGameText("Progress saved! But remember, true hackers rely on their wits, not save points.");
    }
}

function promptForCode() {
    let timeLeft = 60; // Set the timer duration (60 seconds)
    const timerContainer = document.getElementById('timer-container');
    const timerDisplay = document.getElementById('timer');

    // Make the timer visible and start counting down
    timerContainer.style.display = 'block'; 
    timerDisplay.textContent = timeLeft; // Initialize display

    // Timer logic
    const timerInterval = setInterval(() => {
        if (timeLeft > 0) {
            timeLeft--;
            timerDisplay.textContent = timeLeft;
        } else {
            clearInterval(timerInterval);
            timerContainer.style.display = 'none'; // Hide the timer when time runs out
            gameOver(); // Call a function to handle game over when time runs out
        }
    }, 1000);

    // Prompt for the PIN
    const userCode = prompt("Enter the 4-digit access code:");

    // Check if the entered code is correct
    if (userCode === correctCode) {
        clearInterval(timerInterval); // Stop the timer if correct code is entered
        timerContainer.style.display = 'none'; // Hide the timer
        appendToGameText("Access granted. The shadows have revealed their secrets.");
        currentLevel = 4;
        maxUnlockedLevel = Math.max(maxUnlockedLevel, currentLevel);
        appendToGameText(levels[currentLevel].description);
    } else {
        appendToGameText("Access denied. The shadows grow deeper. Try again, but remember, not all is as it seems.");
    }
    updateCommandBoxes();
}

function gameOver() {
    appendToGameText("Time is up! The system has locked you out. Game Over.");
    // Optionally reset or restart the game
    resetGame(); // Assuming a function like resetGame exists to handle game over logic.
}


function promptForPassword() {
    const userPassword = prompt("Enter the password to bypass the firewall:");
    if (userPassword.toLowerCase() === correctPassword) {
        appendToGameText("Firewall breached. You've proven your worth as a true hacker.");
        currentLevel = 6;
        maxUnlockedLevel = Math.max(maxUnlockedLevel, currentLevel);
        appendToGameText(levels[currentLevel].description);
    } else {
        appendToGameText("Incorrect password. The firewall stands strong. Think carefully about the clues you've gathered.");
    }
    updateCommandBoxes();
}

function promptForSequence() {
    const userSequence = prompt("Enter the next number in the sequence:");
    if (userSequence === correctSequence) {
        appendToGameText("Correct! The door unlocks, revealing the path ahead.");
        currentLevel = 9;
        maxUnlockedLevel = Math.max(maxUnlockedLevel, currentLevel);
        appendToGameText(levels[currentLevel].description);
    } else {
        appendToGameText("Incorrect sequence. The door remains locked. Perhaps you need to look at the bigger picture.");
    }
    updateCommandBoxes();
}

function promptForSum() {
    const userSum = prompt("Enter the sum of wisdom:");
    if (userSum === correctSum) {
        appendToGameText("Your wisdom is acknowledged. The path to deeper knowledge opens before you.");
        currentLevel = 14;
        maxUnlockedLevel = Math.max(maxUnlockedLevel, currentLevel);
        appendToGameText(levels[currentLevel].description);
    } else {
        appendToGameText("Incorrect sum. The ancient device and modern console remain inactive. Consider the sequence and its implications.");
    }
    updateCommandBoxes();
}

function handleDisconnect() {
    appendToGameText("WARNING: Disconnecting may result in loss of progress and valuable data.");
    setTimeout(() => {
        appendToGameText("Connection terminated. You've been logged out of the system.");
        setTimeout(() => {
            appendToGameText("Thank you for playing Hacker's Quest!");
            setTimeout(resetGame, 3000);
        }, 2000);
    }, 3000);
}

function saveProgress() {
    localStorage.setItem('hackerQuestLevel', currentLevel.toString());
    localStorage.setItem('hackerQuestLastSavedLevel', lastSavedLevel.toString());
    localStorage.setItem('hackerQuestMaxUnlockedLevel', maxUnlockedLevel.toString());
}

function loadProgress() {
    const savedLevel = localStorage.getItem('hackerQuestLevel');
    const savedLastLevel = localStorage.getItem('hackerQuestLastSavedLevel');
    const savedMaxUnlockedLevel = localStorage.getItem('hackerQuestMaxUnlockedLevel');
    if (savedLevel) {
        currentLevel = parseInt(savedLevel, 10);
        lastSavedLevel = parseInt(savedLastLevel || savedLevel, 10);
        maxUnlockedLevel = parseInt(savedMaxUnlockedLevel || savedLevel, 10);
        appendToGameText(`Welcome back, hacker. Resuming from level ${currentLevel}. The digital realm awaits your expertise.`);
        appendToGameText(levels[currentLevel].description);
        updateCommandBoxes();
    } else {
        initializeGame();
    }
}

function resetGame() {
    currentLevel = 1;
    lastSavedLevel = 1;
    maxUnlockedLevel = 1;
    localStorage.removeItem('hackerQuestLevel');
    localStorage.removeItem('hackerQuestLastSavedLevel');
    localStorage.removeItem('hackerQuestMaxUnlockedLevel');
    gameText.innerHTML = '';
    initializeGame();
}

function initializeGame() {
    const loadingElement = document.createElement('p');
    gameText.appendChild(loadingElement);
    loadingElement.textContent = "Initializing Hacker's Quest";
    
    let dots = 0;
    const loadingInterval = setInterval(() => {
        loadingElement.textContent = "Initializing Hacker's Quest" + ".".repeat(dots % 4);
        dots++;
    }, 500);

    setTimeout(() => {
        clearInterval(loadingInterval);
        loadingElement.textContent = "Initialization complete. Welcome to the shadows.";
        
        const messages = [
            "Welcome to Hacker's Quest. This is not a game for the faint of heart.",
            "You've been chosen for your exceptional skills, but they will be put to the ultimate test.",
            "Your mission: infiltrate the system, uncover Project Omega, and decide the fate of digital security.",
            "Be warned: nothing is as it seems. Every shadow hides a secret, every line of code a potential trap.",
            "Your journey begins now. May your wits be sharp and your mind sharper.",
            "To move between unlocked levels, use the command 'goto level X' where X is the level number.",
            levels[currentLevel].description
        ];

        messages.reduce((delay, message) => {
            return delay.then(() => new Promise(resolve => {
                setTimeout(() => {
                    appendToGameText(message);
                    if (message === messages[messages.length - 1]) {
                        updateCommandBoxes();
                    }
                    resolve();
                }, 3000);
            }));
        }, Promise.resolve());
    }, 5000);
}

submitBtn.addEventListener('click', () => {
    const command = userInput.value.trim().toLowerCase();
    if (command !== '') {
        handleCommand(command);
        userInput.value = '';
    }
});

userInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        submitBtn.click();
    }
});

commandBoxes.forEach(box => {
    box.addEventListener('click', () => {
        handleCommand(box.textContent);
    });
    box.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
            handleCommand(box.textContent);
        }
    });
});

modeToggle.addEventListener('change', () => {
    document.body.classList.toggle('light-mode');
});

burger.addEventListener('click', () => {
    nav.classList.toggle('show');
});

function openModal(modal) {
    modal.style.display = "block";
    modal.setAttribute('aria-hidden', 'false');
}

function closeModal(modal) {
    modal.style.display = "none";
    modal.setAttribute('aria-hidden', 'true');
}

aboutLink.onclick = () => openModal(aboutModal);
helpLink.onclick = () => openModal(helpModal);

for (let closeBtn of closeBtns) {
    closeBtn.onclick = function() {
        closeModal(this.closest('.modal'));
    }
}

window.onclick = (event) => {
    if (event.target.classList.contains('modal')) {
        closeModal(event.target);
    }
}

document.getElementById('clear-progress-btn').addEventListener('click', () => {
    if (confirm("Are you sure you want to clear your progress? This action cannot be undone.")) {
        resetGame();
        appendToGameText("Game progress cleared. The challenge begins anew, hacker.");
    }
});

// Initialize game
loadProgress();
    </script>
    <script type="text/babel">
  function formatNumber(num) {
    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M'
    if (num >= 1000) return (num / 1000).toFixed(1) + 'K'
    return num.toString()
  }

  function LikeButton() {
    const [liked, setLiked] = React.useState(false)
    const [count, setCount] = React.useState(0)
    const [isAnimating, setIsAnimating] = React.useState(false)

    React.useEffect(() => {
      const savedCount = localStorage.getItem('hackerQuestLikeCount')
      const savedLiked = localStorage.getItem('hackerQuestLiked')
      const lastUpdateTime = localStorage.getItem('hackerQuestLastUpdateTime')
      
      if (savedCount) {
        setCount(parseInt(savedCount))
      } else {
        const initialCount = Math.floor(Math.random() * 81) + 20
        setCount(initialCount)
        localStorage.setItem('hackerQuestLikeCount', initialCount.toString())
      }

      if (savedLiked) {
        setLiked(savedLiked === 'true')
      }

      // Calculate missed updates
      if (lastUpdateTime) {
        const timeDiff = Date.now() - parseInt(lastUpdateTime)
        const missedUpdates = Math.floor(timeDiff / 30000) // 30 seconds interval
        if (missedUpdates > 0) {
          setCount(prevCount => {
            const newCount = prevCount + missedUpdates * (Math.floor(Math.random() * 10) + 1)
            localStorage.setItem('hackerQuestLikeCount', newCount.toString())
            return newCount
          })
        }
      }

      // Set up interval for future updates
      const intervalId = setInterval(() => {
        setCount(prevCount => {
          const randomIncrement = Math.floor(Math.random() * 10) + 1
          const newCount = prevCount + randomIncrement
          localStorage.setItem('hackerQuestLikeCount', newCount.toString())
          localStorage.setItem('hackerQuestLastUpdateTime', Date.now().toString())
          return newCount
        })
      }, 30000)

      return () => clearInterval(intervalId)
    }, [])

    const handleLike = () => {
      setIsAnimating(true)
      setTimeout(() => setIsAnimating(false), 300)

      setLiked(prevLiked => {
        const newLiked = !prevLiked
        localStorage.setItem('hackerQuestLiked', newLiked.toString())
        return newLiked
      })

      setCount(prevCount => {
        const newCount = prevCount + (liked ? -1 : 1)
        localStorage.setItem('hackerQuestLikeCount', newCount.toString())
        return newCount
      })
    }

    return (
      <div className="like-button">
        <button
          onClick={handleLike}
          className={`p-2 rounded-full transition-all duration-300 ${
            isAnimating ? 'scale-125' : ''
          }`}
          aria-label={liked ? 'Unlike' : 'Like'}
        >
            <svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill={liked ? "green" : "none"} // Green fill when liked, none when not liked
  stroke={liked ? "none" : "green"} // Green stroke only when not liked
  strokeWidth="2"
  strokeLinecap="round"
  strokeLinejoin="round"
  className="w-6 h-6"
>
  <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />
</svg>

        </button>
        <span className="ml-2 text-sm font-semibold" aria-live="polite">
          Likes: {formatNumber(count)}
        </span>
      </div>
    )
  }

  ReactDOM.render(<LikeButton />, document.getElementById('like-button-container'));
</script>
</body>
</html>
